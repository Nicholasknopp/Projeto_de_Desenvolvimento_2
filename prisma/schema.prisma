datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Usuario {
  id           Int            @id @default(autoincrement())
  nome         String
  email        String         @unique
  senha        String
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
  movimentacoes Movimentacao[]
}

model Medicamento {
  id            Int            @id @default(autoincrement())
  nome          String
  descricao     String?
  quantidade    Int
  unidade       String
  validade      DateTime
  fabricante    String
  lote          String
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  movimentacoes Movimentacao[]
  notificacoes  Notificacao[]
}

model Movimentacao {
  id            Int         @id @default(autoincrement())
  tipo          String      // "entrada" ou "saida"
  quantidade    Int
  data          DateTime    @default(now())
  responsavel   String
  observacao    String?
  medicamentoId Int
  usuarioId     Int
  medicamento   Medicamento @relation(fields: [medicamentoId], references: [id])
  usuario       Usuario     @relation(fields: [usuarioId], references: [id])
}

model Notificacao {
  id            Int         @id @default(autoincrement())
  tipo          String      // "validade" ou "estoque_baixo"
  mensagem      String
  data          DateTime    @default(now())
  lida          Boolean     @default(false)
  medicamentoId Int
  medicamento   Medicamento @relation(fields: [medicamentoId], references: [id])
}